class Cimg2picture{constructor(options){this.options=options,this.options.webp=!1}init(){this.canIuseWebp();const thisClass=this;setTimeout((function(){const validAttribute=["data-img2picture-background","data-img2picture-srcset"],doc=document.querySelector("body"),MutationObserver=window.MutationObserver,myObserver=new MutationObserver(img2picture_showUmages),obsConfig={attributes:!0,subtree:!0,attributeFilter:validAttribute};myObserver.observe(doc,obsConfig),thisClass.showUmages(),window.addEventListener("scroll",(function(){thisClass.showUmages()})),window.addEventListener("resize",(function(){thisClass.showUmages()}))}),600)}canIuseWebp(){const thisClass=this;thisClass.options.webp=!1;let webp={lossy:{src:"data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",support:null},lossless:{src:"data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",support:null}};for(var i in webp)webp[i].img=new Image,webp[i].img.id=i,webp[i].img.onload=function(event){var el=(event=event||window.event).target||event.srcElement;webp[el.id].support=el.width>0&&el.height>0},webp[i].img.onerror=function(event){var el=(event=event||window.event).target||event.srcElement;webp[el.id].support=!1},webp[i].img.src=webp[i].src;setTimeout((function(){thisClass.options.webp=webp.lossy.support&&webp.lossless.support}),500)}showUmages(){const thisClass=this,windowHeight=window.innerHeight||document.documentElement.clientHeight,windowWidth=window.innerWidth||document.documentElement.clientWidth,top=-2*windowHeight,bottom=3*windowHeight;let needWidth="original";thisClass.options.RESPONSIVE_VALUE.forEach((function(el,ind){const min=0+parseInt(el.min),max=0+parseInt(el.max);windowWidth>=min&&windowWidth<=max&&(needWidth=el.width)}));let elements=document.querySelectorAll("*[data-img2picture-background]");elements.length>0&&elements.forEach((function(element,index){const imgRect=element.getBoundingClientRect();if(top<imgRect.top&&bottom>imgRect.top){const background_text=element.getAttribute("data-img2picture-background"),backgrounds=JSON.parse(background_text);let background_url="";void 0!==backgrounds.FILES[needWidth]&&backgrounds.FILES[needWidth].length>0&&(background_url=thisClass.options.webp&&void 0!==backgrounds.FILES[needWidth].webp?backgrounds.FILES[needWidth].webp:backgrounds.FILES[needWidth].src),""==background_url&&(thisClass.options.webp&&void 0!==backgrounds.FILES.original.webp?(background_url=backgrounds.FILES.original.webp,background_url||(background_url=backgrounds.FILES.original.src)):background_url=backgrounds.FILES.original.src),element.style.backgroundImage="url("+background_url+")"}})),elements=document.querySelectorAll("*[data-img2picture-srcset]:not(*[data-img2picture-showed])"),elements.length>0&&elements.forEach((function(element,index){const imgRect=element.getBoundingClientRect();if(top<imgRect.top&&bottom>imgRect.top){const srcset=element.getAttribute("data-img2picture-srcset");element.setAttribute("srcset",srcset),element.setAttribute("data-img2picture-showed","Y")}}))}}function img2picture_showUmages(){"undefined"!=typeof img2picture&&img2picture.showUmages()}document.addEventListener("DOMContentLoaded",(function(){if("undefined"!=typeof img2picture_options){const img2picture=new Cimg2picture(img2picture_options);img2picture.init()}}));